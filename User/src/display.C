#include "global.H"

//extern STATUS_DATA G_EleStat;    //结构体变量,存储电梯状态
INT8U Dispchg = 0;//改变标志
INT8U SUC_DispVRam[2][3] = {0};      //?????????
INT8U SUC_DispVRamBuf[2][3] = {0};  //???????????
INT8U GUC_DispFlrH_Temp;
INT8U GUC_DispFlrM_Temp;
INT8U GUC_DispFlrL_Temp;
INT8U GUC_DispFlrH_temp;
INT8U GUC_DispFlrM_temp;
INT8U GUC_DispFlrL_temp;
INT8U TestFlash1;
static INT8U ktime=0;
static INT8U knum=1;
extern INT8U GUC_DispFlrH ;       //显示楼层高位
extern INT8U GUC_DispFlrM ;       //显示楼层中位
extern INT8U GUC_DispFlrL ;       //显示楼层低位
INT8U data1[14]={0};
INT8U data2[14]={0};
extern void  DispDriver3(INT8U ch);
extern void  DispDriver4(INT8U ch);
extern void CS1628_Disp_All(void);
INT8U GUC_FaultDispFlg = 1;  //故障标志位
INT8U	full=0;               //特殊状态标志
INT8U arrow=0;              //箭头标志
INT8U 	DisplayTempBuf[20];
#define MODE_4_13	0x00
#define MODE_5_12	0x01
#define MODE_6_11	0x02
#define MODE_7_10	0x03
#define SET_WRITE	0x44		
#define	DISP_CTL_ON		0x8A  //调节亮度	
#define	DISP_CTL_OFF	0x80		
#define	SET_ADDR	0xC0
extern INT8U DisplayIndex;
#define ADD_MAX	14
#define L01	0x01
#define L02	0x02
#define L03	0x04
#define L04	0x08
#define L05	0x10
#define L06	0x20
#define L07	0x40
#define L08	0x80

#define L09	0x01
#define L10	0x02

#define L11	0x01
#define L12	0x02
#define L13	0x04
#define L14	0x08
#define L15	0x10
#define L16	0x20
#define L17	0x40
#define L18	0x80

#define L19	0x01
#define L20	0x02

#define L21	0x01
#define L22	0x02
#define L23	0x04
#define L24	0x08
#define L25	0x10
#define L26	0x20
#define L27	0x40
#define L28	0x80

#define L29	0x01
#define L30	0x02

#define L31	0x01
#define L32	0x02
#define L33	0x04
#define L34	0x08
#define L35	0x10
#define L36	0x20
#define L37	0x40
#define L38	0x80

#define L39	0x01
#define L40	0x02

#define L41	0x01
#define L42	0x02
#define L43	0x04
#define L44	0x08
#define L45	0x10
#define L46	0x20
#define L47	0x40
#define L48	0x80

#define L49	0x01
#define L50	0x02

#define L51	0x01
#define L52	0x02
#define L53	0x04
#define L54	0x08
#define L55	0x10
#define L56	0x20
#define L57	0x40
#define L58	0x80

#define L59	0x01
#define L60	0x02

#define L61	0x01
#define L62	0x02
#define L63	0x04
#define L64	0x08
#define L65	0x10
#define L66	0x20
#define L67	0x40
#define L68	0x80

#define L69	0x01
#define L70	0x02

#define ADD_MAX	14

extern void delayms(INT16U time);
static const INT8U SUC_Codeflr1[] =
{	
	1,2,3,4,5,6,7,8,9,10,//09
    1,2,3,4,5,6,7,8,9,10,//19
    1,2,3,4,5,6,7,8,9,10,//29
    1,2,3,4,5,6,7,8,9,10,//39
    1,2,3,4,5,6,7,8,9,0,//49
    2,3,4,5,6,7,8,9,10,0,//59
    2,3,4,5,6,7,8,9,10,12,//69
    17,23,2,3,4,26,2,3,4,28,//79
    2,3,4,22,18,2,3,4,11,11,//89
    12,11,11,12,11,2,3,4,16,0,//99
    2,3,4,5,13,2,3,4,5,14,//109
    16,16,16,16,16,13,13,13,13,0,//119
    12,12,12,12,11,11,11,16,12,15,//129
    11,12,17,17,11,12,11,12,12,13,//139
    39,40,41,12,11,12,21,31,29,17,//149
    17,0,0,0,0,0,0,0,0,0,//159
    16,36,28,11,36,26,12,18,11,2,//169
    3,4,12,39,17,15,16,22,22,23,//179
    23,23,0,0,0,0,23,11,12,29,//189
    12,11,12,43,0,2,3,2,3,4,//199
    4,5,10,1,2,3,4,5,6,7,//209
    8,9,10,1,2,3,4,5,5,6,//219
    14,13,5,6,29,22,13,16,16,16,//229
    16,44,7,9, 26,26,28,13,7,8,//239
    9,10,39,45,46,47,48,16 //247    
};
static const INT8U SUC_Codeflr2[] =
{
    0,0,0,0,0,0,0,0,0,0,//09
    2,2,2,2,2,2,2,2,2,2,//19
    3,3,3,3,3,3,3,3,3,3,//29
    4,4,4,4,4,4,4,4,4,4,//39
    5,5,5,5,5,5,5,5,5,0,//49
    37,37,37,37,37,37,37,37,37,0,//59
    12,12,12,12,12,12,12,12,12,0,//69
    0,0,23,23,23,0,26,26,26,0,//79
    28,28,28,0,0,18,18,18,4,41,//89
    41,42,46,46,6,17,17,17,0,0,//99
    13,13,13,13,0,14,14,14,14,0,//109
    2,3,4,5,6,2,3,4,5,0,//119
    2,3,4,5,2,3,5,13,22,0,//129
    0,31,22,31,7,7,8,8,6,7,//139
    200,201,202,29,44,42,0,0,0,15,//149
    21,203,204,205,206,207,208,209,210,211,//159
    17, 23,29,48,0,18,11,26,11,22,//169
    22,22,26,37,11,12,28,2,6,2,//179
    4,5,212,213,214,215,26,43,43,11,//189
    44,45,45,216,217,15,15,29,29,29,//199
    15,15,5,6,6,6,6,6,6,6,//209
    6,6,6,7,7,7,7,7,26,26,//219
    22,20,29,29,29,22,6,10,22,31,//229
    16,218,29,29,22,31,23,26,26,26,//239
    26,26,26,219,220,221,222,11//249
};
static const INT8U SUC_Codeflr3[] =    //地址码显示
{	
	1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
    1,2,3,4,5,6,7,8,9,10,
};
static const INT8U SUC_Codeflr4[] =
{
	0,0,0,0,0,0,0,0,0,0,
    2,2,2,2,2,2,2,2,2,2,
    3,3,3,3,3,3,3,3,3,3,
    4,4,4,4,4,4,4,4,4,4,
    5,5,5,5,5,5,5,5,5,5,
    6,6,6,6,6,6,6,6,6,6,
    7,7,7,7,7,7,7,7,7,7,
    8,8,8,8,8,8,8,8,8,8,
    9,9,9,9,9,9,9,9,9,9,
    10,10,10,10,10,10,10,10,10,10,
};
static const INT8U SUC_Codeflr5[] =       //10-19,01 11 21 31 41 51 61 71 81 91三位静止显示
{
	39,40,41,42,43,44,45,46,47,48,//10 11 12 13 14 15 16 17 18 19
	93,40,85,86,87,88,89,90,91,92,//01 11 21 31 41 51 61 71 81 91 
};

static const INT8U SUC_ASCIICode[] =              //ASCII码三位显示
{
	0, 0, 0, 0, 0, 0, 0, 0, 74, 75,	    // space,!,",#,$,%,&,',(,),  ????
	76, 38, 0,37, 0, 77,                     // *,+,,,-,.,/
	1,  2,  3,  4,  5,  6,  7,  8,  9,  10,     // 0 - 9     
	0, 0, 0, 78, 0, 0, 0, 11, 12, 13,           // A,B,C
	14, 15, 16, 17, 18, 19, 20, 21, 22, 23,     // D,E,F,G,H,I,J,K,L,M
	24, 25, 26, 27, 28, 29, 30, 31, 32, 33,     // N,O,P,Q,R,S,T,U,V,W
	34, 35, 36, 79, 80, 81, 0, 82, 0,               // X,Y,Z
	49, 50, 51, 52, 53, 54, 55, 56, 57, 58,	      //a,b,c,d,e,f,g,h,i,j,
	59, 60, 61, 62, 63, 64, 65, 66, 67, 68,	     //k,l,m,n,o,p,q,r,s,t
	69, 70, 71, 0, 72, 73, 0, 83, 0, 0,	                //u,v,w,x,y,z
};
static const INT8U JumpDis_Code[][3] =              
{
	 {3,4,11},{3,5,11},{3,6,11},{21,15,2},{21,15,3},{21,15,4},{21,15,5},{21,15,6},{21,15,7},{21,15,8}, //23A,24A,25A,KE1,KE2,KE3,KE4,KE5,KE6,KE7,
	 {21,15,9},{21,15,10},{12,2,11},{12,3,11},{12,4,11},{12,5,11},{3,3,11},{3,3,12},{4,4,11},{26,4,11},//KE8,KE9,B1A,B2A,B3A,B4A,22A,22B,33A,P3A,
	 {26,8,11},{26,9,11},{26,10,11},  //P7A,P8A,P9A,
};

unsigned char Arrow_Code0[4][ADD_MAX]=       //点阵 箭头
{
//-null-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
//-up------------------------------------
//L48对应LED47
	(L01),0,0,0,(L21),0,(L31),0,(L41+L48),0,L51,0,L61,0,
//-dn------------------------------------
//L18对应LED17,L18对应LED27,L38对应LED37,L48对应LED47
	(L01+L07+L08),(L09+L10),(L11+L18),0,(L21+L28),0,(L31+L38),0,(L41+L48),0,0,0,0,0,
//-up & dn-------------------------------
	(L01+L07+L08),(L09+L10),(L11+L18),0,(L21+L28),0,(L31+L38),0,(L41+L48),0,L51,0,L61,0,
};
unsigned char Arrow_Code1[4][ADD_MAX]=       //点阵 箭头
{
//-null-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
//-up------------------------------------
//L62对应LED122,L63对应LED123,L65对应LED125
	0,0,0,0,0,0,0,0,0,0,L62+L63+L65,0,(L64+L65+L66+L67+L68),(L69+L70),
//-dn------------------------------------
//L62对应LED122
	0,0,0,0,0,0,0,0,0,0,L62,0,(L61+L62+L63),(L69),
//-up & dn-------------------------------
	0,0,0,0,0,0,0,0,0,0,L62+L63+L65,0,(L61+L62+L63+L64+L65+L66+L67+L68),(L69+L70),
};

unsigned char High_Code[][ADD_MAX]=       //高位字库
{//-null----------------------------------0
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
//-0-------------------------------------1
	(L01+L02+L03+L04+L05+L06+L07),0,L17,0,0,0,(L31+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-1-------------------------------------2
	0,0,0,0,(L22+L23+L24+L25+L26+L27),0,0,0,0,0,0,0,0,0,
//-2-------------------------------------3
	(L01+L02+L03+L04),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L45+L46+L47),0,0,0,0,0,
//-3-------------------------------------4
	(L01),0,L14+L17,0,0,0,(L31+L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-4-------------------------------------5
	(L05+L06+L07),0,L14,0,0,0,(L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-5-------------------------------------6
	(L01+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L42+L43+L44),0,0,0,0,0,
//-6-------------------------------------7
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L42+L43+L44),0,0,0,0,0,
//-7-------------------------------------8
	0,0,L17,0,0,0,(L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-8-------------------------------------9
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-9-------------------------------------10
	(L01+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-A-------------------------------------11
	(L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-B-------------------------------------12
	(L01),0,L17,0,(L22+L23+L24+L25+L26+L27),0,(L31+L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-C-------------------------------------13
	(L01+L02+L03+L04+L05+L06+L07),0,L17,0,0,0,(L31+L37),0,0,0,0,0,0,0,
//-D-------------------------------------14
	(L01),0,L17,0,(L22+L23+L24+L25+L26+L27),0,(L31+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-E-------------------------------------15
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,0,0,0,0,0,0,
//-F-------------------------------------16
	(L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L34+L37),0,0,0,0,0,0,0,
//-G-------------------------------------17
	(L01+L02+L03+L04+L05+L06+L07),0,(L17),0,0,0,(L31+L34+L37),0,(L42+L43+L44),0,0,0,0,0,
//-H-------------------------------------18
	(L02+L03+L04+L05+L06+L07),0,(L14),0,0,0,(L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-I-------------------------------------19
	L01,0,L17,0,(L22+L23+L24+L25+L26+L27),0,(L31+L37),0,0,0,0,0,0,0,
//-J-------------------------------------20
	L01,0,L17,0,(L22+L23+L24+L25+L26+L27),0,(L37),0,0,0,0,0,0,0,
//-K-------------------------------------21
	(L02+L03+L04+L05+L06+L07),0,(L14),0,0,0,(L32+L33+L35+L36),0,0,0,0,0,0,0,
//-L-------------------------------------22
	(L01+L02+L03+L04+L05+L06+L07),0,0,0,0,0,(L31),0,0,0,0,0,0,0,
//-M-------------------------------------23
	(L02+L03+L04+L05+L06+L07),0,(L15+L16),0,0,0,(L35+L36),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-N-------------------------------------24
	(L02+L03+L04+L05+L06+L07),0,(L15+L16),0,0,0,(L32+L33),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-O-------------------------------------25
	///(L01+L02+L03+L04+L05+L06+L07),0,L17,0,0,0,(L31+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
    (L01+L02+L03+L04),0,(L14),0,0,0,(L31+L34),0,(L42+L43+L44),0,0,0,0,0,
//-P-------------------------------------26
	(L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L34+L37),0,(L45+L46+L47),0,0,0,0,0,
//-Q-------------------------------------27
	(L01+L02+L03+L04+L05+L06+L07),0,L17,0,0,0,(L31+L32+L33+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-R-------------------------------------28
	(L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L32+L33+L34+L37),0,(L45+L46+L47),0,0,0,0,0,
//-S-------------------------------------29
	(L01),0,(L15+L16+L17),0,0,0,(L31+L32+L33+L37),0,0,0,0,0,0,0,
//-T-------------------------------------30
	0,0,L17,0,(L22+L23+L24+L25+L26+L27),0,(L37),0,0,0,0,0,0,0,
//-U-------------------------------------31
	(L01+L02+L03+L04+L05+L06+L07),0,0,0,0,0,(L31),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-V-------------------------------------32
	(L02+L03+L04+L05+L06+L07),0,(L12+L13),0,0,0,(L35+L36),0,0,0,0,0,0,0,
//-W-------------------------------------33
	(L02+L03+L04+L05+L06+L07),0,(L12+L13),0,0,0,(L32+L33),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-X-------------------------------------34
	0,0,(L12+L13+L15+L16),0,0,0,(L32+L33+L35+L36),0,0,0,0,0,0,0,
//-Y-------------------------------------35
	0,0,(L15+L16),0,(L22+L23+L24),0,(L35+L36),0,0,0,0,0,0,0,
//-Z-------------------------------------36
	(L01),0,(L12+L13+L17),0,0,0,(L31+L35+L36+L37),0,0,0,0,0,0,0,
//-负号 - -------------------------------37
	0,0,L14,0,0,0,L34,0,0,0,0,0,0,0,
//-正号 + -------------------------------38
	0,0,L14,0,(L22+L23+L24+L25+L26+L27),0,L34,0,0,0,0,0,0,0,
//-10 -----------------------------------39
	(L02+L03+L04+L05+L06+L07),0,0,0,(L22+L23+L24+L25+L26+L27),0,(L31+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-11 -----------------------------------40
	(L02+L03+L04+L05+L06+L07),0,0,0,0,0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,		
//-12 -----------------------------------41
	(L02+L03+L04+L05+L06+L07),0,0,0,(L22+L23+L24),0,(L37+L31+L34),0,(L45+L46+L47),0,0,0,0,0,	
//-13 -----------------------------------42
	(L02+L03+L04+L05+L06+L07),0,0,0,0,0,(L31+L37+L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-14 -----------------------------------43
	(L02+L03+L04+L05+L06+L07),0,0,0,(L25+L26+L27),0,(L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-15 -----------------------------------44
	(L02+L03+L04+L05+L06+L07),0,0,0,(L25+L26+L27),0,(L37+L31+L34),0,(L42+L43+L44),0,0,0,0,0,	
//-16 -----------------------------------45
	(L02+L03+L04+L05+L06+L07),0,0,0,(L22+L23+L24+L25+L26+L27),0,(L37+L34+L31),0,(L42+L43+L44),0,0,0,0,0,
//-17 -----------------------------------46
	(L02+L03+L04+L05+L06+L07),0,0,0,0,0,(L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-18 -----------------------------------47
	(L02+L03+L04+L05+L06+L07),0,0,0,(L22+L23+L24+L25+L26+L27),0,(L37+L31+L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-19 -----------------------------------48
	(L02+L03+L04+L05+L06+L07),0,0,0,(L25+L26+L27),0,(L37+L31+L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-a ------------------------------------49
	(L01+L02+L03+L04),0,L14,0,(L22+L23+L24),0,L31,0,0,0,0,0,0,0,
//-b-------------------------------------50
	(L01+L02+L03+L04+L05+L06+L07),0,(L14),0,0,0,(L31+L34),0,(L42+L43+L44),0,0,0,0,0,
//-c-------------------------------------51
	(L01+L02+L03+L04),0,(L14),0,0,0,(L31+L34),0,0,0,0,0,0,0,
//-d-------------------------------------52
	(L01+L02+L03+L04),0,(L14),0,0,0,(L31+L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-e-------------------------------------53
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,0,0,(L31+L34+L37),0,(L45+L46+L47),0,0,0,0,0,
//-f ------------------------------------54
	0,0,L14,0,(L22+L23+L24+L25+L26+L27),0,(L34+L37),0,0,0,0,0,0,0,
//-g ------------------------------------55
	0,0,0,0,(L25+L26+L27),0,(L31+L34+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-h ------------------------------------56
	(L02+L03+L04+L05+L06+L07),0,L14,0,0,0,(L34),0,(L42+L43+L44),0,0,0,0,0,
//-i ------------------------------------57
	0,0,0,0,(L22+L23+L24),0,0,0,0,0,0,0,0,0,
//-j ------------------------------------58
	L01,0,0,0,(L22+L23+L24+L25+L26+L27),0,0,0,0,0,0,0,0,0,
//-k ------------------------------------59
	0,0,0,0,(L22+L23+L24+L25+L26+L27),0,(L32+L33+L35+L36),0,0,0,0,0,0,0,
//-l ------------------------------------60
	0,0,0,0,(L22+L23+L24+L25+L26+L27),0,L31,0,0,0,0,0,0,0,	
//-m ------------------------------------61
	(L02+L03+L04),0,L14,0,(L22+L23+L24),0,(L34),0,(L42+L43+L44),0,0,0,0,0,	
//-n ------------------------------------62
	(L02+L03+L04),0,L14,0,0,0,(L34),0,(L42+L43+L44),0,0,0,0,0,	
//-o ------------------------------------63
	0,0,0,0,(L22+L23+L24),0,(L31+L34),0,(L42+L43+L44),0,0,0,0,0,	
//-p ------------------------------------64
	L01,0,0,0,(L22+L23+L24+L25+L26+L27),0,(L34+L37),0,(L45+L46+L47),0,0,0,0,0,
//-q ------------------------------------65
	(L05+L06+L07),0,(L14+L17),0,(L22+L23+L24+L25+L26+L27),0,(L31),0,0,0,0,0,0,0,
//-r ------------------------------------66
	0,0,0,0,(L22+L23+L24),0,L34,0,0,0,0,0,0,0,
//-s ------------------------------------67
	L01,0,0,0,(L22+L23+L24),0,L34,0,0,0,0,0,0,0,	
//-t ------------------------------------68
	0,0,L14,0,(L22+L23+L24+L25+L26+L27),0,(L31+L34),0,0,0,0,0,0,0,
//-u ------------------------------------69
	(L01+L02+L03+L04),0,0,0,0,0,L31,0,(L42+L43+L44),0,0,0,0,0,	
//-v ------------------------------------70
	0,0,0,0,0,0,(L32+L33),0,(L42+L43+L44),0,0,0,0,0,
//-w ------------------------------------71
	(L02+L03+L04),0,(L12+L13),0,0,0,(L32+L33),0,(L42+L43+L44),0,0,0,0,0,
//-y ------------------------------------72
	0,0,0,0,(L25+L26+L27),0,(L31+L34),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-z ------------------------------------73
	(L01),0,(L12+L13+L14),0,0,0,0,0,0,0,0,0,0,0,
//-( ------------------------------------74
	0,0,0,0,0,0,(L32+L33+L35+L36),0,0,0,0,0,0,0,	
//-)------------------------------------75
	0,0,(L12+L13+L15+L16),0,0,0,0,0,0,0,0,0,0,0,	
//-*------------------------------------76
	0,0,(L12+L13+L14+L15+L16),0,(L22+L23+L24+L25+L26+L27),0,(L32+L33+L34+L35+L36),0,0,0,0,0,0,0,	
//-/------------------------------------77
	0,0,(L12+L13),0,0,0,(L35+L36),0,0,0,0,0,0,0,	
//-=------------------------------------78
	L01,0,(L14),0,0,0,(L31+L34),0,0,0,0,0,0,0,	
//-[-------------------------------------79
	(L01+L02+L03+L04+L05+L06+L07),0,L17,0,0,0,0,0,0,0,0,0,0,0,
//-\------------------------------------80
	0,0,(L15+L16),0,0,0,(L32+L33),0,0,0,0,0,0,0,	
//-]-------------------------------------81
	0,0,L17,0,0,0,(L31+L37),0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-_------------------------------------82
	L01,0,0,0,0,0,(L31),0,0,0,0,0,0,0,				
//-| -------------------------------83
	0,0,0,0,(L22+L23+L24+L25+L26+L27),0,0,0,0,0,0,0,0,0,
//-o ------------------------------------84(配合oL)
	(L01+L02+L03+L04),0,L14,0,0,0,(L31+L34),0,(L42+L43+L44),0,0,0,0,0,
//-21 -----------------------------------85
	(L01+L02+L03+L04),0,(L14+L17),0,(L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-31 -----------------------------------86
	(L01),0,(L14+L17),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-41 -----------------------------------87
	(L05+L06+L07),0,(L14),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-51 -----------------------------------88
	(L01+L05+L06+L07),0,(L14+L17),0,(L22+L23+L24),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,		
//-61 -----------------------------------89
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,(L22+L23+L24),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-71 -----------------------------------90
	0,0,(L17),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-81 -----------------------------------91
	(L01+L02+L03+L04+L05+L06+L07),0,(L14+L17),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,	
//-91 -----------------------------------92
	(L01+L05+L06+L07),0,(L14+L17),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,
//-01 -----------------------------------93
	(L01+L02+L03+L04+L05+L06+L07),0,(L17),0,(L22+L23+L24+L25+L26+L27),0,0,0,(L42+L43+L44+L45+L46+L47),0,0,0,0,0,																										
};


unsigned char Low_Code[][ADD_MAX]=       //低位显示字库
{
//-null-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
//-0-------------------------------------
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-1-------------------------------------
	0,0,(L14),0,L24,0,L34,0,L44,0,L54,0,L64,0,
//-2-------------------------------------
	(L02+L06),0,(L12),0,(L22),0,(L32+L33+L35),0,(L46),0,(L56),0,(L63+L65+L66),0,
//-3-------------------------------------
	(L02+L06),0,(L16),0,(L26),0,(L33+L35+L36),0,(L46),0,(L56),0,(L63+L65+L66),0,
//-4-------------------------------------
	0,0,(L16),0,(L26),0,(L33+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L66),0,
//-5-------------------------------------
	(L02+L06),0,(L16),0,(L26),0,(L33+L35+L36),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-6-------------------------------------
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-7-------------------------------------
	0,0,(L16),0,(L26),0,(L36),0,(L46),0,(L56),0,(L63+L65+L66),0,
//-8-------------------------------------
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-9-------------------------------------
	(L02+L06),0,(L16),0,(L26),0,(L33+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-A-------------------------------------11
	0,0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-B-------------------------------------12
	(L02+L06),0,(L14+L16),0,(L24+L26),0,(L34+L35+L36),0,(L44+L46),0,(L54+L56),0,(L63+L64+L65+L66),0,
//-C-------------------------------------13
	(L02+L06),0,(L12),0,(L22),0,(L32),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-D-------------------------------------14
	(L02+L06),0,(L14+L16),0,(L24+L26),0,(L34+L36),0,(L44+L46),0,(L54+L56),0,(L63+L64+L65+L66),0,
//-E-------------------------------------15
	(L02+L06),0,(L12),0,(L22),0,(L32+L33+L35),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-F-------------------------------------16
	0,0,(L12),0,(L22),0,(L32+L33+L35),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-G-------------------------------------17
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L35+L36),0,(L42),0,(L52),0,(L62+L63+L65),0,
//-H-------------------------------------18
	0,0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L66),0,
//-I-------------------------------------19
	(L02+L06),0,(L14),0,L24,0,L34,0,L44,0,L54,0,(L63+L64+L65),0,
//-J-------------------------------------20
	(L02),0,(L14),0,L24,0,L34,0,L44,0,L54,0,(L63+L64+L65),0,
//-K-------------------------------------21
	0,0,(L12+L15),0,(L22+L25),0,(L32+L33),0,(L42+L45),0,(L52+L55),0,(L62),0,
//-L-------------------------------------22
	(L02+L06),0,(L12),0,(L22),0,(L32),0,(L42),0,(L52),0,(L62),0,
//-M-------------------------------------23
	0,0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L43+L45+L46),0,(L52+L53+L55+L56),0,(L62+L66),0,
//-N-------------------------------------24
	0,0,(L12+L15+L16),0,(L22+L25+L26),0,(L32+L36),0,(L42+L43+L46),0,(L52+L53+L56),0,(L62+L66),0,
//-O-------------------------------------25
	///(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L36+L33+L35),0,0,0,0,0,0,0,	
//-P-------------------------------------26
	0,0,(L12),0,(L22),0,(L32+L33+L35),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-Q-------------------------------------27
	(L02+L06),0,(L12+L15+L16),0,(L22+L25+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-R-------------------------------------28
	0,0,(L12+L15),0,(L22+L25),0,(L32+L33+L35),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-S-------------------------------------29
	(L02+L06),0,(L15),0,(L25),0,0,0,(L43),0,(L53),0,(L63+L65),0,
//-T-------------------------------------30
	0,0,(L14),0,L24,0,L34,0,L44,0,L54,0,(L63+L64+L65),0,
//-U-------------------------------------31
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L66),0,
//-V-------------------------------------32
	0,0,(L12+L13),0,(L22+L23),0,(L32),0,(L42+L45),0,(L52+L55),0,(L62),0,
//-W-------------------------------------33
	0,0,(L12+L13+L15+L16),0,(L22+L23+L25+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L66),0,
//-X-------------------------------------34
	0,0,(L13+L15),0,(L23+L25),0,0,0,(L43+L45),0,(L53+L55),0,0,0,
//-Y-------------------------------------35
	0,0,(L14),0,(L24),0,(L34),0,(L43+L45),0,(L53+L55),0,0,0,
//-Z-------------------------------------36
	(L02+L06),0,(L13),0,(L23),0,0,0,(L45),0,(L55),0,(L63+L65),0,
//-负号 - -------------------------------37
	0,0,0,0,0,0,(L33+L35),0,0,0,0,0,0,0,
//-正号 + -------------------------------38
	0,0,(L14),0,L24,0,(L33+L34+L35),0,L44,0,L54,0,(L64),0,
//-10---- -------------------------------39
	L06,0,(L12+L14+L16),0,(L22+L24+L26),0,(L32+L34+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L64+L66+L65),0,
//-11 -----------------------------------40
	0,0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L66),0,		
//-12 -----------------------------------41
	L06,0,(L12+L14),0,(L22+L24),0,(L32+L34+L35),0,(L42+L46),0,(L52+L56),0,(L62+L65+L66),0,		
//-13 -----------------------------------42
	L06,0,(L12+L16),0,(L22+L26),0,(L32+L35+L36),0,(L42+L46),0,(L52+L56),0,(L62+L65+L66),0,	
//-14 -----------------------------------43
	0,0,(L12+L16),0,(L22+L26),0,(L32+L35+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L64+L66),0,
//-15 -----------------------------------44
	L06,0,(L12+L16),0,(L22+L26),0,(L32+L35+L36),0,(L42+L44),0,(L52+L54),0,(L62+L64+L65),0,	
//-16 -----------------------------------45
	L06,0,(L12+L14+L16),0,(L22+L24+L26),0,(L32+L34+L35+L36),0,(L42+L44),0,(L52+L54),0,(L62+L64+L65),0,
//-17 -----------------------------------46
	0,0,(L12+L16),0,(L22+L26),0,(L32+L36),0,(L42+L46),0,(L52+L56),0,(L62+L65+L66),0,	
//-18 -----------------------------------47
	L06,0,(L12+L14+L16),0,(L22+L24+L26),0,(L32+L34+L35+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L64+L65+L66),0,
//-19 -----------------------------------48
	L06,0,(L12+L16),0,(L22+L26),0,(L32+L35+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L64+L65+L66),0,
//-a ------------------------------------49
	(L02+L06),0,(L12+L14),0,(L22+L24),0,(L32+L33+L34),0,0,0,0,0,0,0,	
//-b ------------------------------------50
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,L42,0,L52,0,L62,0,
//-c ------------------------------------51
	(L02+L06),0,(L12),0,(L22),0,(L32+L33+L35),0,0,0,0,0,0,0,
//-d ------------------------------------52
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,L46,0,L56,0,L66,0,	
//-e-------------------------------------53
	(L02+L06),0,(L12),0,(L22),0,(L32+L33+L35),0,(L42+L46),0,(L52+L56),0,(L62+L63+L65+L66),0,
//-f -------------------------------------54
	0,0,(L14),0,L24,0,(L33+L34+L35),0,L44,0,L54,0,(L64+L65),0,	
//-g -------------------------------------55
	L06,0,(L16),0,L26,0,(L36+L35),0,(L44+L46),0,(L54+L56),0,(L64+L65+L66),0,	
//-h-------------------------------------56
	0,0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,(L42),0,(L52),0,(L62),0,
//-i ------------------------------------57
	0,0,(L14),0,L24,0,(L34),0,0,0,0,0,0,0,		
//-j-------------------------------------58
	L02,0,(L14),0,L24,0,L34,0,L44,0,L54,0,L64,0,	
//-k-------------------------------------59
	0,0,(L14+L15),0,(L24+L25),0,L34,0,(L44+L45),0,(L54+L55),0,L64,0,
//-l-------------------------------------60
	L06,0,(L14),0,L24,0,L34,0,L44,0,L54,0,L64,0,	
//-m-------------------------------------61
	0,0,(L12+L14+L16),0,(L24+L22+L26),0,(L32+L34+L33+L35+L36),0,0,0,0,0,0,0,	
//-n-------------------------------------62
	0,0,(L12+L16),0,(L22+L26),0,(L32+L33+L35+L36),0,0,0,0,0,0,0,
//-o-------------------------------------63
	L06,0,(L14+L16),0,(L24+L26),0,(L34+L35+L36),0,0,0,0,0,0,0,	
//-p-------------------------------------64
	L02,0,(L14),0,(L24),0,(L34+L35),0,(L44+L46),0,(L54+L56),0,(L64+L65+L66),0,
//-q-------------------------------------65
	L06,0,(L14),0,(L24),0,(L34+L33),0,(L44+L42),0,(L54+L52),0,(L64+L62+L63),0,	
//-r-------------------------------------66
	0,0,(L14),0,L24,0,(L34+L35),0,0,0,0,0,0,0,
//-s-------------------------------------67
	L02,0,(L14),0,L24,0,(L34+L35),0,0,0,0,0,0,0,	
//-t ------------------------------------68
	L06,0,(L14),0,L24,0,(L33+L34+L35),0,L44,0,L54,0,(L64),0,	
//-u-------------------------------------69
	(L02+L06),0,(L12+L16),0,(L22+L26),0,(L32+L36),0,0,0,0,0,0,0,
//-v ------------------------------------70
	0,0,(L15+L16),0,(L25+L26),0,(L36),0,0,0,0,0,0,0,	
//-w ------------------------------------71
	0,0,(L12+L13+L15+L16),0,(L22+L23+L25+L26),0,(L32+L36),0,0,0,0,0,0,0,	
//-y ------------------------------------72
	L06,0,(L16),0,L26,0,(L36+L35),0,(L44+L46),0,(L54+L56),0,(L64+L66),0,	
//-z ------------------------------------73
	L02,0,(L13),0,L23,0,(L33),0,0,0,0,0,0,0,	
//-(-------------------------------------74
	0,0,(L15),0,(L25),0,0,0,(L45),0,(L55),0,0,0,	
//-)-------------------------------------75
	0,0,(L13),0,(L23),0,0,0,(L43),0,(L53),0,0,0,							
//-*-------------------------------------76
	0,0,(L13+L14+L15),0,(L23+L24+L25),0,(L33+L34+L35),0,(L43+L44+L45),0,(L53+L54+L55),0,L64,0,	
//-/-------------------------------------77
	0,0,(L13),0,(L23),0,0,0,(L45),0,(L55),0,0,0,
//-=-------------------------------------78
	(L02+L06),0,0,0,0,0,(L33+L35),0,0,0,0,0,0,0,
//-[-------------------------------------79
	(L02),0,(L12),0,(L22),0,(L32),0,(L42),0,(L52),0,(L62+L63),0,
//-\-------------------------------------80
	0,0,(L15),0,(L25),0,0,0,(L43),0,(L53),0,0,0,	
//-]-------------------------------------81
	(L06),0,(L16),0,(L26),0,(L36),0,(L46),0,(L56),0,(L66+L65),0,
//-_-------------------------------------82
	(L02+L06),0,0,0,0,0,0,0,0,0,0,0,0,0,	
//-|-------------------------------------83
		0,0,(L14),0,L24,0,L34,0,L44,0,L54,0,(L64),0,
//-o ------------------------------------84(配合oL)
	(L01+L02+L03+L04),0,L14,0,0,0,(L31+L34),0,(L42+L43+L44),0,0,0,0,0,				
//-21 -----------------------------------85
	L02,0,(L12+L16),0,(L22+L26),0,(L32+L33+L36),0,(L44+L46),0,(L54+L56),0,(L64+L63+L66),0,
//-31 -----------------------------------86
	L02,0,(L14+L16),0,(L24+L26),0,(L34+L33+L36),0,(L44+L46),0,(L54+L56),0,(L64+L63+L66),0,	
//-41 -----------------------------------87
	0,0,(L14+L16),0,(L24+L26),0,(L34+L33+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L64+L66),0,	
//-51 -----------------------------------88
	L02,0,(L14+L16),0,(L24+L26),0,(L34+L33+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L66),0,	
//-61 -----------------------------------89
	L02,0,(L12+L14+L16),0,(L22+L24+L26),0,(L32+L34+L33+L36),0,(L42+L46),0,(L52+L56),0,(L62+L63+L66),0,	
//-71 -----------------------------------90
	0,0,(L14+L16),0,(L24+L26),0,(L34+L36),0,(L44+L46),0,(L54+L56),0,(L63+L64+L66),0,
//-81 -----------------------------------91
    L02,0,(L12+L14+L16),0,(L22+L24+L26),0,(L32+L34+L33+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L63+L64+L66),0,
//-91 -----------------------------------92
    L02,0,(L14+L16),0,(L24+L26),0,(L34+L33+L36),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L63+L64+L66),0,	
//-01 -----------------------------------93
    L02,0,(L14+L16+L12),0,(L24+L26+L22),0,(L34+L36+L32),0,(L42+L44+L46),0,(L52+L54+L56),0,(L62+L63+L64+L66),0,	    																	
};

unsigned char Special_Code0[4][ADD_MAX]=       //点阵 状态
{
	//-null-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	//-满载-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	//-驻停-------------------------------------
	(L03+L04+L05),0,0,0,0,0,0,0,0,0,0,0,0,0,
	//-满载 & 驻停------------------------------
	(L03+L04+L05),0,0,0,0,0,0,0,0,0,0,0,0,0,
};
unsigned char Special_Code1[4][ADD_MAX]=       //点阵 状态
{
	//-null-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	//-满载-------------------------------------
	0,0,L11,0,L21,0,0,0,L41,0,0,0,0,0,
	//-驻停-------------------------------------
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	//-满载 & 驻停------------------------------
	0,0,L11,0,L21,0,0,0,L41,0,0,0,0,0,
};
static void wait(void)
{
    INT8U i = 10;
    while(i--);
}

void  DispDriver3(INT8U ch)
{
    INT8U j;
    for(j=0;j<14;j++)
    data1[j]=Low_Code[ch][j];
}
void  DispDriver4(INT8U ch)
{
    INT8U j;
    for(j=0;j<14;j++)
    data2[j]=High_Code[ch][j];
}
void DispalyOut(void)  //显示驱动函数
{
    INT8U i,j;
    for(j=0;j<14;j++)
    {	
        CS1628_CP1_Write(j, (data1[j]+Arrow_Code0[arrow][j]+Special_Code0[full][j])); 
        CS1628_CP2_Write(j, (data2[j]+Arrow_Code1[arrow][j]+Special_Code1[full][j])); 
    }
    CS1628_Display();
}

void DisplayFun3Wei(void)     //三位显示函数
{
    if(SUC_ASCIICode[GUC_DispFlrH-32]!=0&&SUC_ASCIICode[GUC_DispFlrM-32] == 0&&SUC_ASCIICode[GUC_DispFlrL-32] == 0)
    {//100       	
        DispDriver3(SUC_ASCIICode[GUC_DispFlrH-32]);
    }
    if(SUC_ASCIICode[GUC_DispFlrH-32] == 0&&SUC_ASCIICode[GUC_DispFlrM-32]!=0&&SUC_ASCIICode[GUC_DispFlrL-32] == 0)
    {//010
        DispDriver3(SUC_ASCIICode[GUC_DispFlrM-32]);
    }
    if(SUC_ASCIICode[GUC_DispFlrH-32] == 0 && SUC_ASCIICode[GUC_DispFlrM-32] == 0&& SUC_ASCIICode[GUC_DispFlrL-32] != 0)
    {//001
        DispDriver3(SUC_ASCIICode[GUC_DispFlrL-32]);
    } 
    if(SUC_ASCIICode[GUC_DispFlrH-32] != 0 && SUC_ASCIICode[GUC_DispFlrM-32] == 0 && SUC_ASCIICode[GUC_DispFlrL-32] != 0)
    {//101
        DispDriver4(SUC_ASCIICode[GUC_DispFlrH-32]);
        DispDriver3(SUC_ASCIICode[GUC_DispFlrL-32]);
    }
    if(SUC_ASCIICode[GUC_DispFlrH-32] != 0 && SUC_ASCIICode[GUC_DispFlrM-32] != 0&& SUC_ASCIICode[GUC_DispFlrL-32] == 0)
    {//110
        DispDriver4(SUC_ASCIICode[GUC_DispFlrH-32]);
        DispDriver3(SUC_ASCIICode[GUC_DispFlrM-32]);
    }
    if(SUC_ASCIICode[GUC_DispFlrH-32] == 0 && SUC_ASCIICode[GUC_DispFlrM-32] != 0 && SUC_ASCIICode[GUC_DispFlrL-32] != 0)  
    {//011
        DispDriver4(SUC_ASCIICode[GUC_DispFlrM-32]);
        DispDriver3(SUC_ASCIICode[GUC_DispFlrL-32]);
    } 
    if(SUC_ASCIICode[GUC_DispFlrH-32] != 0 && SUC_ASCIICode[GUC_DispFlrM-32] != 0 && SUC_ASCIICode[GUC_DispFlrL-32] != 0)
    {//111    	        	
        if((GUC_DispFlrH==49) && (GUC_DispFlrM >= 48 && GUC_DispFlrM <= 57))//高位为1，中位为0-9
        {
            DispDriver4(SUC_Codeflr5[GUC_DispFlrM-48]);
            DispDriver3(SUC_ASCIICode[GUC_DispFlrL-32]); 
        }
        //else if((GUC_DispFlrH >= 50 && GUC_DispFlrH <= 57) && (GUC_DispFlrM == 49)) //高位为2-9，中位为1
        else if((GUC_DispFlrH >= 48 && GUC_DispFlrH <= 57) && (GUC_DispFlrM == 49)) //高位为0-9，中位为1            
        {
            DispDriver4(SUC_Codeflr5[GUC_DispFlrH-38]);
            DispDriver3(SUC_ASCIICode[GUC_DispFlrL-32]); 
        }	
        else if((GUC_DispFlrM==49) && (GUC_DispFlrL >= 48 && GUC_DispFlrL <= 57))//中位为1，低位为0-9
        {
            DispDriver4(SUC_ASCIICode[GUC_DispFlrH-32]);
            DispDriver3(SUC_Codeflr5[GUC_DispFlrL-48]);
        } 
        else if((GUC_DispFlrM >= 48 && GUC_DispFlrM <= 57) && (GUC_DispFlrL==49) )//中位为0-9，低位为1
        {
            DispDriver4(SUC_ASCIICode[GUC_DispFlrH-32]);
            DispDriver3(SUC_Codeflr5[GUC_DispFlrM-38]);
        }         	 
        else
        {  
            GUC_DispFlrH_Temp = SUC_ASCIICode[GUC_DispFlrH-32];
            GUC_DispFlrM_Temp = SUC_ASCIICode[GUC_DispFlrM-32];
            GUC_DispFlrL_Temp = SUC_ASCIICode[GUC_DispFlrL-32];  
            ktime++;
            if(ktime==5)
            {				  
                switch(knum) 
                {
                    case 1:
                        knum=2;
                        break;
                    case 2:
                        knum=3;
                        break;
                    case 3:
                        knum=1;
                        break;
                    default:
                    break;
                }
                ktime=0;
            }
            switch(knum) 
            { 
                case 1:
                    GUC_DispFlrM_temp = GUC_DispFlrH_Temp;
                    GUC_DispFlrL_temp = GUC_DispFlrM_Temp;
                    break;
                case 2:	
                    GUC_DispFlrM_temp = GUC_DispFlrM_Temp;
                    GUC_DispFlrL_temp = GUC_DispFlrL_Temp;
                    break;
                case 3:
                    GUC_DispFlrM_temp = GUC_DispFlrL_Temp;
                    GUC_DispFlrL_temp = 0;
                    break;
                default:
                break;
            }	
            DispDriver4(GUC_DispFlrM_temp);
            DispDriver3(GUC_DispFlrL_temp); 								                      	  	  
        }	
    }    
}

void DisplayManager(void)
{
    INT8U i,j;   
    static INT8U TestFlash,TestFlash1,TestFlash2;
    static INT8U ArrowFlash = 0;//箭头闪烁显示频率控制 
    if(GUC_S1Buf) 
    {
        if(!GUC_TestFlg)
        {
            DispDriver3(0);
            DispDriver4(0);					
            arrow=0;
            full=0;					
        }
        if(G_EleStat.bit.FullLoad&&(GUC_MasterAddr != 0))  //轿外满载状态
        {
            full=1;
        }				
		if(G_EleStat.bit.Fireman&&(GUC_MasterAddr == 0))
		{						 
            full=2;		  							
		}	
		if(G_EleStat.bit.OverLoad&&(GUC_MasterAddr == 0))
		{		
            arrow=0;
            full=1;		  
            DispDriver4(84);
            DispDriver3(22);
            DispalyOut();						
            return;					
		}					
        else if(G_EleStat.bit.Fault && (!GUC_UpBtnBuf || !GUC_DownBtnBuf) && (GUC_MasterAddr!=0)) //故障状态
        {
            full=2;	
            if(GUC_FaultDispFlg)
            {
                arrow=3;// 箭头全亮                
                if(Errcode > 99) //三位的错误代码
                {
                    GUC_DispFlrH_Temp = Errcode/100+1;
                    GUC_DispFlrM_Temp = (Errcode%100)/10+1;
                    GUC_DispFlrL_Temp = (Errcode%100)%10+1;
                    {    
                        ktime++;
                        if(ktime==5)
                        {				  
                            switch(knum) 
                            {
                                case 1:
                                    knum=2;
                                    break;
                                case 2:
                                    knum=3;
                                    break;
                                case 3:
                                    knum=1;
                                    break;
                                default:
                                break;
                            }
                            ktime=0;
                        }
                        switch(knum) 
                        { 
                            case 1:
                                GUC_DispFlrM_temp = GUC_DispFlrH_Temp;
                                GUC_DispFlrL_temp = GUC_DispFlrM_Temp;
                                break;
                            case 2:	
                                GUC_DispFlrM_temp = GUC_DispFlrM_Temp;
                                GUC_DispFlrL_temp = GUC_DispFlrL_Temp;
                                break;
                            case 3:
                                GUC_DispFlrM_temp = GUC_DispFlrL_Temp;
                                GUC_DispFlrL_temp = 0;
                                break;
                            default:
                            break;
                        }									                      	  	  
                    }	
                    DispDriver4(GUC_DispFlrM_temp);
                    DispDriver3(GUC_DispFlrL_temp);
                    DispalyOut();		    
                }
                else if(Errcode > 9) //两位错误代码
                {
                    DispDriver4(Errcode/10+1);
                    DispDriver3(Errcode%10+1);
                    DispalyOut();
                }
                else if(Errcode == 0) //不支持错误代码的只显示 全亮
                {
                    DispDriver4(0);
                    DispDriver3(0);
                    DispalyOut();
                }
                else //非零以外的一位错误代码
                { 
                    DispDriver4(0);
                    DispDriver3(Errcode+1);  //1位
                    DispalyOut();
                }                            
            }												
            else 
            {  
                
                if(GUC_DispFlrH != 0 && GUC_DispFlrM != 0 && GUC_DispFlrL != 0) //三位显示
                {   
                    DisplayFun3Wei(); 
                    DispalyOut();	
                } 
                else
                { 
                    i = GUC_DispFlr;
                    if(i<=247)        			
                    {        			
                        if(SUC_Codeflr2[i] < 200)
                        {        	           
                            DispDriver3(SUC_Codeflr1[i]);
                            DispDriver4(SUC_Codeflr2[i]);	
                            DispalyOut();          			   
                        }
                        else
                        {	
                            DisplayIndex = SUC_Codeflr2[i];
                            GUC_DispFlrH_Temp = JumpDis_Code[DisplayIndex - 200][0];//1
                            GUC_DispFlrM_Temp = JumpDis_Code[DisplayIndex - 200][1];//0 1 2 3 4 5 6 7 8 9
                            GUC_DispFlrL_Temp = JumpDis_Code[DisplayIndex - 200][2];//???? 
                            {    
                                ktime++;
                                if(ktime==5)
                                {				  
                                    switch(knum) 
                                    {
                                        case 1:
                                            knum=2;
                                            break;
                                        case 2:
                                            knum=3;
                                            break;
                                        case 3:
                                            knum=1;
                                            break;
                                        default:
                                        break;
                                    }
                                    ktime=0;
                                }
                                switch(knum) 
                                { 
                                    case 1:
                                        GUC_DispFlrM_temp = GUC_DispFlrH_Temp;
                                        GUC_DispFlrL_temp = GUC_DispFlrM_Temp;
                                        break;
                                    case 2:	
                                        GUC_DispFlrM_temp = GUC_DispFlrM_Temp;
                                        GUC_DispFlrL_temp = GUC_DispFlrL_Temp;
                                        break;
                                    case 3:
                                        GUC_DispFlrM_temp = GUC_DispFlrL_Temp;
                                        GUC_DispFlrL_temp = 0;
                                        break;
                                    default:
                                    break;
                                }									                      	  	  
                            }	
                            DispDriver4(GUC_DispFlrM_temp);
                            DispDriver3(GUC_DispFlrL_temp);
                            DispalyOut();  
                        }                                 
                    }
                    else 
                    {
                        DispDriver3(0);
                        DispDriver4(0);
                        DispalyOut();	
                    }
                }
            }								
            return;        
        }
        else if(G_EleStat.bit.OutOfService&&(GUC_MasterAddr != 0))  //OutOfService状态
        {
            full=2;
            DispDriver3(0);
            DispDriver4(0);	
            DispalyOut();					  	
            return;
        }
        else if(!GUC_TestFlg)
        {
            switch(GUC_CurDir)   //显示方向
            {
                case 1:              //上行.未运行
                    arrow=1;
                    break;
                case 2:              //上行,运行中
                    ArrowFlash++;
                    if(ArrowFlash < 4)
                    {
                        arrow=1;
                    }              
                    if(ArrowFlash > 8)
                    {
                        ArrowFlash=0;
                    }	
                    break;														
                case 3:              //下行,运行中
                    ArrowFlash++;
                    if(ArrowFlash < 4)
                    {
                        arrow=2;
                    }               
                    if(ArrowFlash > 8)
                    {
                        ArrowFlash=0;
                    }	
                    break;							
                case 4:              //下行,未运行
                    arrow=2;
                    break;
                default:             //其它没定义的值默认为无方向
                arrow=0;
                break;
            }
        }
        if(GUC_TestFlg)//测试时点击上召、下召、锁梯按钮即时跳显‘T1’，‘T2’，‘T3’,'T4'
        {
            if(TestFlash < 20)
            {
                TestFlash++;
                CS1628_Disp_All();										
                return;
            }
            else 
            {
                TestFlash1++;
                if((TestFlash1%40)<20) full=1;	else  full=2;    //FULL和PARK交替显示                      
                if(((TestFlash1%5) == 0) && (TestFlash2<41))TestFlash2++;//0.5s ????																						                    
                else 
                {						
                    switch(GUC_CurDir)   //显示方向
                    {
                        case 1:              //上行.未运行
                            arrow=1;
                            break;
                        case 2:              //上行,运行中
                            ArrowFlash++;
                            if(ArrowFlash < 4)
                            {
                                arrow=1;
                            }
                            if(ArrowFlash > 8)
                            {
                                ArrowFlash=0;
                            }	
                            break;														
                        case 3:              //下行,运行中
                            ArrowFlash++;
                            if(ArrowFlash < 4)
                            {
                                arrow=2;
                            }
                            if(ArrowFlash > 8)
                            {
                                ArrowFlash=0;
                            }	
                            break;							
                        case 4:              //下行,未运行
                            arrow=2;
                            break;
                        default:             //其它没定义的值默认为无方向
                        arrow=0;
                        break;
                    }
                    if(GUC_TestInput)
                    {
                        DispDriver3(GUC_TestInput+1);
                        DispDriver4(30);
                        DispalyOut();
                    }
                    else
                    {                     
                        if(GUC_DispFlrH != 0 && GUC_DispFlrM != 0 && GUC_DispFlrL != 0) //三位显示
                        {   
                            DisplayFun3Wei(); 
                            DispalyOut();
                        } 
                        else
                        {    
                            i = GUC_DispFlr;   
                            DispDriver3(SUC_Codeflr1[i]);
                            DispDriver4(SUC_Codeflr2[i]);
                            DispalyOut();
                        }
                    }
                }
            }
        }
        else
        {  
            if(GUC_DispFlrH != 0 && GUC_DispFlrM != 0 && GUC_DispFlrL != 0)//三位显示
            {   
                DisplayFun3Wei();
                DispalyOut(); 						
            } 
            else           		
            {						
                i = GUC_DispFlr;                
                if(i<=247)        			
                {        			
                    if(SUC_Codeflr2[i] < 200)
                    {        	           
                        DispDriver3(SUC_Codeflr1[i]);
                        DispDriver4(SUC_Codeflr2[i]);	
                        DispalyOut();          			   
                    }
                    else
                    {	
                        DisplayIndex = SUC_Codeflr2[i];
                        GUC_DispFlrH_Temp = JumpDis_Code[DisplayIndex - 200][0];//1
                        GUC_DispFlrM_Temp = JumpDis_Code[DisplayIndex - 200][1];//0 1 2 3 4 5 6 7 8 9
                        GUC_DispFlrL_Temp = JumpDis_Code[DisplayIndex - 200][2];//???? 
                        {    
                            ktime++;
                            if(ktime==5)
                            {				  
                                switch(knum) 
                                {
                                    case 1:
                                        knum=2;
                                        break;
                                    case 2:
                                        knum=3;
                                        break;
                                    case 3:
                                        knum=1;
                                        break;
                                    default:
                                    break;
                                }
                                ktime=0;
                            }
                            switch(knum) 
                            { 
                                case 1:
                                    GUC_DispFlrM_temp = GUC_DispFlrH_Temp;
                                    GUC_DispFlrL_temp = GUC_DispFlrM_Temp;
                                    break;
                                case 2:	
                                    GUC_DispFlrM_temp = GUC_DispFlrM_Temp;
                                    GUC_DispFlrL_temp = GUC_DispFlrL_Temp;
                                    break;
                                case 3:
                                    GUC_DispFlrM_temp = GUC_DispFlrL_Temp;
                                    GUC_DispFlrL_temp = 0;
                                    break;
                                default:
                                break;
                            }									                      	  	  
                        }	
                        DispDriver4(GUC_DispFlrM_temp);
                        DispDriver3(GUC_DispFlrL_temp);
                        DispalyOut();  
                    }                                 
                }
                else
                {
                    DispDriver3(0);
                    DispDriver4(0);	
                    DispalyOut();
                }  						         													
            }
        }	
    }								
    else
    {
        arrow=0;
        i = GUC_MasterAddr;
        DispDriver3(SUC_Codeflr3[i]);
        DispDriver4(SUC_Codeflr4[i]);
        DispalyOut();
    }
}
